---
import TutorialVideo from "./TutorialVideo.astro";

const videos = [
  {
    title: "Building Embedded TUIs with Rust & Ratatui",
    youtubeId: "F04kQMKwrwQ",
    description: "Orhun ParmaksÄ±z showcases building embedded applications with Ratatui",
  },
  {
    title: "Are we embedded yet?",
    youtubeId: "QPjojOuhbe8",
    description: "Jagoda ÅšlÄ…zak explores how Ratatui is moving beyond the terminal",
  },
  {
    title: "Ratatui Tutorial Beginners Guide",
    youtubeId: "M-BTpC_BEN0",
    description: "A Ratatui Tutorial by Jonkero to get you up and running",
  },
  {
    title: "Textual UIs with Orhun ParmaksÄ±z",
    youtubeId: "VbLz79trgz8",
    description: "Bryan and Adam from Oxide Computer discussing TUIs with Orhun ParmaksÄ±z",
  },
  {
    title: "Bringing Terminal Aesthetics to the Web With Rust",
    youtubeId: "iepbyYrF_YQ",
    description: "Orhun ParmaksÄ±z explores rendering TUIs on the web",
  },
];

// Generate random sizes for each item
const tileData = videos.map(() => ({
  colSpan: Math.floor(Math.random() * 2) + 1, // 1-2 columns
  rowSpan: Math.floor(Math.random() * 2) + 1, // 1-2 rows
}));
---

<div class="not-content max-2xl:mx-6">
  <h2
    class="pt-[80px] pb-6 text-4xl font-bold text-black max-xl:text-center max-sm:pt-[50px] dark:text-white"
  >
    Watch and learn <span class="text-blue-700 dark:text-yellow-500">Ratatui</span> ğŸ‘¨â€ğŸ³ğŸ€
  </h2>

  <p class="max-w-[1440px] pb-12 text-lg leading-8 max-xl:text-center max-sm:text-sm">
    Watch our â€˜recipesâ€™ for building features, explore creative twists from other developers, and
    discussions that stir up fresh ideas.
  </p>

  <div class="m-auto flex max-w-[1440px] flex-wrap gap-6">
    {
      videos.map((video, index) => (
        <div
          class={`gallery-item grid h-[500px] min-w-[300px] max-sm:h-[350px] ${
            tileData[index].colSpan === 1
              ? "grid-rows-[1fr_4fr] max-sm:grid-rows-[1fr_8fr]"
              : "grid-cols-[1fr_3fr] max-sm:grid-cols-none"
          }`}
          data-col-span={tileData[index].colSpan}
        >
          <TutorialVideo
            colSpan={tileData[index].colSpan}
            title={video.title}
            youtubeId={video.youtubeId}
            description={video.description}
          />
        </div>
      ))
    }
  </div>
</div>

<style>
  .gallery-item {
    flex: 1 1 calc(33.333% - 1rem); /* 3 columns by default */
  }

  /* Span 2 columns - double width */
  .gallery-item[data-col-span="2"] {
    flex: 2 1 calc(66.666% - 1rem);
  }

  /* Responsive adjustments */
  @media (max-width: 1024px) {
    .gallery-item {
      flex: 1 1 calc(50% - 1rem); /* 2 columns on tablets */
    }

    .gallery-item[data-col-span="2"] {
      flex: 2 1 calc(100% - 1rem);
    }
  }

  @media (max-width: 768px) {
    .gallery-item {
      flex: 1 1 100%; /* Single column on mobile */
    }

    .gallery-item[data-col-span="2"] {
      flex: 1 1 100%; /* Single column on mobile */
    }
  }
</style>
